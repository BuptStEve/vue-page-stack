{"version":3,"sources":["webpack://VuePageStack/webpack/bootstrap","webpack://VuePageStack/./node_modules/current-script-polyfill/currentScript.js","webpack://VuePageStack/./node_modules/@vue/cli-service/lib/commands/build/setPublicPath.js","webpack://VuePageStack/./src/config/config.js","webpack://VuePageStack/./src/history.js","webpack://VuePageStack/./src/components/VuePageStack.js","webpack://VuePageStack/./src/mixin.js","webpack://VuePageStack/./src/index.js","webpack://VuePageStack/./node_modules/@vue/cli-service/lib/commands/build/entry-lib.js"],"names":["componentName","keyName","pushName","goName","replaceName","backName","forwardName","histoty","action","config","isDef","v","undefined","isAsyncPlaceholder","node","isComment","asyncFactory","getFirstComponentChild","children","Array","isArray","i","length","c","componentOptions","stack","getIndexByKey","key","index","VuePageStack","name","abstract","data","props","max","type","String","Number","default","render","$route","query","slot","$slots","vnode","componentInstance","$destroy","splice","history","push","keepAlive","getStack","eventRegister","router","routerPush","bind","routerGo","go","routerReplace","replace","routerBack","back","routerForward","forward","location","onResolve","onReject","catch","error","console","log","n","hasKey","getKey","src","r","Math","random","toString","hasSameMatched","to","from","matched","Error","path","VuePageStackPlugin","install","Vue","component","prototype","$pageStack","mixin","beforeEach","next","hash","params","meta"],"mappings":"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","file":"vue-page-stack.common.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"fb15\");\n","// document.currentScript polyfill by Adam Miller\n\n// MIT license\n\n(function(document){\n  var currentScript = \"currentScript\",\n      scripts = document.getElementsByTagName('script'); // Live NodeList collection\n\n  // If browser needs currentScript polyfill, add get currentScript() to the document object\n  if (!(currentScript in document)) {\n    Object.defineProperty(document, currentScript, {\n      get: function(){\n\n        // IE 6-10 supports script readyState\n        // IE 10+ support stack trace\n        try { throw new Error(); }\n        catch (err) {\n\n          // Find the second match for the \"at\" string to get file src url from stack.\n          // Specifically works with the format of stack traces in IE.\n          var i, res = ((/.*at [^\\(]*\\((.*):.+:.+\\)$/ig).exec(err.stack) || [false])[1];\n\n          // For all scripts on the page, if src matches or if ready state is interactive, return the script tag\n          for(i in scripts){\n            if(scripts[i].src == res || scripts[i].readyState == \"interactive\"){\n              return scripts[i];\n            }\n          }\n\n          // If no match, return null\n          return null;\n        }\n      }\n    });\n  }\n})(document);\n","// This file is imported into lib/wc client bundles.\n\nif (typeof window !== 'undefined') {\n  if (process.env.NEED_CURRENTSCRIPT_POLYFILL) {\n    require('current-script-polyfill')\n  }\n\n  var i\n  if ((i = window.document.currentScript) && (i = i.src.match(/(.+\\/)[^/]+\\.js(\\?.*)?$/))) {\n    __webpack_public_path__ = i[1] // eslint-disable-line\n  }\n}\n\n// Indicate to webpack that this file can be concatenated\nexport default null\n","export default {\n  componentName: 'VuePageStack',\n  keyName: 'stack-key',\n  pushName: 'push',\n  goName: 'go',\n  replaceName: 'replace',\n  backName: 'back',\n  forwardName: 'forward'\n};\n","import config from './config/config';\n\nconst histoty = {\n  action: config.pushName\n};\n\nexport default histoty;\n","import history from '../history';\nimport config from '../config/config';\n\nfunction isDef(v) {\n  return v !== undefined && v !== null;\n}\n\nfunction isAsyncPlaceholder(node) {\n  return node.isComment && node.asyncFactory;\n}\n\nfunction getFirstComponentChild(children) {\n  if (Array.isArray(children)) {\n    for (let i = 0; i < children.length; i++) {\n      const c = children[i];\n      if (isDef(c) && (isDef(c.componentOptions) || isAsyncPlaceholder(c))) {\n        return c;\n      }\n    }\n  }\n}\n\nconst stack = [];\n\nfunction getIndexByKey(key) {\n  for (let index = 0; index < stack.length; index++) {\n    if (stack[index].key === key) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nlet VuePageStack = keyName => {\n  return {\n    name: config.componentName,\n    abstract: true,\n    data() {\n      return {};\n    },\n    props: {\n      max: {\n        type: [String, Number],\n        default() {\n          return '';\n        }\n      }\n    },\n    render() {\n      let key = this.$route.query[keyName];\n      const slot = this.$slots.default;\n      const vnode = getFirstComponentChild(slot);\n      if (!vnode) {\n        return vnode;\n      }\n      let index = getIndexByKey(key);\n      if (index !== -1) {\n        vnode.componentInstance = stack[index].vnode.componentInstance;\n        // destroy the instances that will be spliced\n        for (let i = index + 1; i < stack.length; i++) {\n          stack[i].vnode.componentInstance.$destroy();\n          stack[i] = null;\n        }\n        stack.splice(index + 1);\n      } else {\n        if (history.action === config.replaceName) {\n          // destroy the instance\n          stack[stack.length - 1].vnode.componentInstance.$destroy();\n          stack[stack.length - 1] = null;\n          stack.splice(stack.length - 1);\n        }\n        stack.push({ key, vnode });\n      }\n      vnode.data.keepAlive = true;\n      return vnode;\n    }\n  };\n};\n\nfunction getStack() {\n  return stack;\n}\n\nexport { VuePageStack, getIndexByKey, getStack };\n","import history from './history';\nimport config from './config/config';\n\nlet eventRegister = function(router) {\n  const routerPush = router.push.bind(router);\n  const routerGo = router.go.bind(router);\n  const routerReplace = router.replace.bind(router);\n  const routerBack = router.back.bind(router);\n  const routerForward = router.forward.bind(router);\n\n  router.push = (location, onResolve, onReject) => {\n    history.action = config.pushName;\n    if (onResolve || onReject) {\n      return routerPush(location, onResolve, onReject);\n    }\n    return routerPush(location).catch(error => {\n      if (error !== undefined) {\n        console.log(error);\n      }\n    });\n  };\n\n  router.go = n => {\n    history.action = config.goName;\n    routerGo(n);\n  };\n\n  router.replace = (location, onResolve, onReject) => {\n    history.action = config.replaceName;\n    if (onResolve || onReject) {\n      return routerReplace(location, onResolve, onReject);\n    }\n    return routerReplace(location).catch(error => {\n      if (error !== undefined) {\n        console.log(error);\n      }\n    });\n  };\n\n  router.back = () => {\n    history.action = config.backName;\n    routerBack();\n  };\n\n  router.forward = () => {\n    history.action = config.forwardName;\n    routerForward();\n  };\n};\n\nexport default eventRegister;\n","import { VuePageStack, getIndexByKey, getStack } from './components/VuePageStack';\nimport mixin from './mixin';\nimport history from './history';\nimport config from './config/config';\n\nfunction hasKey(query, keyName) {\n  return !!query[keyName];\n}\n\nfunction getKey(src) {\n  return src.replace(/[xy]/g, function(c) {\n    let r = (Math.random() * 16) | 0;\n    let v = c === 'x' ? r : (r & 0x3) | 0x8;\n    return v.toString(16);\n  });\n}\n\nfunction hasSameMatched(to, from) {\n  if (to.matched.length === 0) {\n    throw Error('\\n this path ' + to.path + ' has no matched. \\n\\n');\n  }\n  if (from.matched[0] && from.matched[0].path === to.matched[0].path) {\n    return true;\n  }\n  return false;\n}\n\nconst VuePageStackPlugin = {};\n\nVuePageStackPlugin.install = function(Vue, { router, name = config.componentName, keyName = config.keyName }) {\n  if (!router) {\n    throw Error('\\n vue-router is necessary. \\n\\n');\n  }\n  Vue.component(name, VuePageStack(keyName));\n  \n  Vue.prototype.$pageStack = {\n    getStack\n  };\n\n  mixin(router);\n  router.beforeEach((to, from, next) => {\n    if (!hasKey(to.query, keyName)) {\n      if (hasSameMatched(to, from)) {\n        to.query[keyName] = from.query[keyName];\n      } else {\n        to.query[keyName] = getKey('xxxxxxxx');\n      }\n      let replace = history.action === config.replaceName || !hasKey(from.query, keyName);\n      next({\n        hash: to.hash,\n        path: to.path,\n        name: to.name,\n        params: to.params,\n        query: to.query,\n        meta: to.meta,\n        replace: replace\n      });\n    } else {\n      let index = getIndexByKey(to.query[keyName]);\n      if (index === -1) {\n        to.params[keyName + '-dir'] = config.forwardName;\n      } else {\n        to.params[keyName + '-dir'] = config.backName;\n      }\n      next({ params: to.params });\n    }\n  });\n};\n\nexport default VuePageStackPlugin;\n","import './setPublicPath'\nimport mod from '~entry'\nexport default mod\nexport * from '~entry'\n"],"sourceRoot":""}