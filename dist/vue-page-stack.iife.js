var VuePageStack=function(g,E){"use strict";const r={componentName:"VuePageStack",pushName:"push",goName:"go",replaceName:"replace",backName:"back",forwardName:"forward"},c={action:r.pushName,n:1};/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/process.env.NODE_ENV!=="production"&&Object.freeze({}),process.env.NODE_ENV!=="production"&&Object.freeze([]);const _=(e,o)=>{for(let l=0;l<e.length;l++)e[l](o)},O={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"};function b(e,o,l,i){E.callWithAsyncErrorHandling(e,o,E.ErrorCodes.VNODE_HOOK,[l,i])}const M=e=>e.__isSuspense,k={ENTER:0,LEAVE:1,REORDER:2};function m(e){e.shapeFlag&=~O.COMPONENT_SHOULD_KEEP_ALIVE,e.shapeFlag&=~O.COMPONENT_KEPT_ALIVE}function h(e){return e.shapeFlag&O.SUSPENSE?e.ssContent:e}const s=[],L=E.defineComponent({name:r.componentName,__isKeepAlive:!0,emits:["back","forward"],setup(e,{slots:o,emit:l}){const i=E.getCurrentInstance(),N=i.ctx,f=i.suspense,{renderer:{p,m:P,um:D,o:{createElement:H}}}=N,y=H("div");N.activate=(n,a,t,T,d)=>{const u=n.component;P(n,a,t,k.ENTER,f),p(u.vnode,n,a,t,u,f,T,n.slotScopeIds,d),E.queuePostFlushCb(()=>{u.isDeactivated=!1,u.a&&_(u.a);const A=n.props&&n.props.onVnodeMounted;A&&b(A,u.parent,n)},f)},N.deactivate=n=>{const a=n.component;P(n,y,null,k.LEAVE,f),E.queuePostFlushCb(()=>{a.da&&_(a.da);const t=n.props&&n.props.onVnodeUnmounted;t&&b(t,a.parent,n),a.isDeactivated=!0},f)};function K(n){m(n),D(n,i,f,!0)}let S=!1,C=!1;const V=()=>{S&&(C?s[s.length-1]=h(i.subTree):c.action!=r.replaceName?s.push(h(i.subTree)):s[s.length-1]=h(i.subTree))};return E.onMounted(V),E.onUpdated(V),E.onBeforeUnmount(()=>{for(const n of s)K(n)}),()=>{if(S=!1,C=!1,!o.default)return null;const n=o.default(),a=n[0];if(n.length>1)return n;if(!E.isVNode(a)||!(a.shapeFlag&O.STATEFUL_COMPONENT)&&!(a.shapeFlag&O.SUSPENSE))return a;let t=h(a);if(t.el&&(t=E.cloneVNode(t),a.shapeFlag&O.SUSPENSE&&(a.ssContent=t)),S=!0,c.action===r.backName){l("back");const T=-c.n,d=s[s.length-T-1];if(!d||d.key!=a.key)return a;t.el=d.el,t.component=d.component,t.transition&&E.setTransitionHooks(t,t.transition),t.shapeFlag|=O.COMPONENT_KEPT_ALIVE;for(let u=s.length-T;u<s.length;u++)m(s[u]),s[u]=null;s.splice(s.length-T),C=!0}else l("forward");return t.shapeFlag|=O.COMPONENT_SHOULD_KEEP_ALIVE,M(a.type)?a:t}}}),w=e=>{const o=e.push.bind(e),l=e.go.bind(e),i=e.replace.bind(e),N=e.back.bind(e),f=e.forward.bind(e);e.push=p=>(c.action=r.pushName,o(p)),e.go=p=>{c.action=r.goName,p<0&&(c.action=r.backName,c.n=p),l(p)},e.replace=p=>(c.action=r.replaceName,i(p)),e.back=()=>{c.action=r.backName,c.n=-1,N()},e.forward=()=>{c.action=r.forwardName,f()}},F={install(e,{router:o,backCallback:l,forwardCallback:i}={router:null,backCallback:null,forwardCallback:null}){if(!o)throw Error("router is required");let N=null;o.options.history.listen((f,p,P)=>{N=P}),o.beforeEach(()=>{N&&(N.direction==="back"&&l?l():N.direction==="forward"&&i&&i(),N=null)})}},I=()=>{c.n=-1,c.action=r.backName,console.log("browser back")},R=()=>{c.action=r.forwardName,console.log("browser forward")},U={install(e,{router:o}){if(!o)throw Error(`
 vue-router is necessary. 

`);e.component(r.componentName,L),e.use(F,{router:o,backCallback:I,forwardCallback:R}),w(o)}};return g.VuePageStack=L,g.VuePageStackPlugin=U,Object.defineProperty(g,Symbol.toStringTag,{value:"Module"}),g}({},Vue);
