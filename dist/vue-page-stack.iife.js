var VuePageStack=function(l){"use strict";const E={componentName:"VuePageStack",keyName:"stack-key",pushName:"push",goName:"go",replaceName:"replace",backName:"back",forwardName:"forward"},m={action:E.pushName};let O;const A=new Uint8Array(16);function R(){if(!O&&(O=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!O))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return O(A)}const s=[];for(let e=0;e<256;++e)s.push((e+256).toString(16).slice(1));function f(e,n=0){return s[e[n+0]]+s[e[n+1]]+s[e[n+2]]+s[e[n+3]]+"-"+s[e[n+4]]+s[e[n+5]]+"-"+s[e[n+6]]+s[e[n+7]]+"-"+s[e[n+8]]+s[e[n+9]]+"-"+s[e[n+10]]+s[e[n+11]]+s[e[n+12]]+s[e[n+13]]+s[e[n+14]]+s[e[n+15]]}const _={randomUUID:typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto)};function D(e,n,t){if(_.randomUUID&&!n&&!e)return _.randomUUID();e=e||{};const r=e.random||(e.rng||R)();if(r[6]=r[6]&15|64,r[8]=r[8]&63|128,n){t=t||0;for(let a=0;a<16;++a)n[t+a]=r[a];return n}return f(r)}/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/process.env.NODE_ENV!=="production"&&Object.freeze({}),process.env.NODE_ENV!=="production"&&Object.freeze([]);const k=(e,n)=>{for(let t=0;t<e.length;t++)e[t](n)},N={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"};function b(e,n,t,r){l.callWithAsyncErrorHandling(e,n,l.ErrorCodes.VNODE_HOOK,[t,r])}const M=e=>e.__isSuspense,L={ENTER:0,LEAVE:1,REORDER:2};function U(e){e.shapeFlag&=~N.COMPONENT_SHOULD_KEEP_ALIVE,e.shapeFlag&=~N.COMPONENT_KEPT_ALIVE}function h(e){return e.shapeFlag&N.SUSPENSE?e.ssContent:e}const d=[],F=()=>l.defineComponent({name:E.componentName,__isKeepAlive:!0,setup(e,{slots:n}){const t=l.getCurrentInstance(),r=t.ctx,a=t.suspense,{renderer:{p:g,m:u,um:S,o:{createElement:x}}}=r,j=x("div");r.activate=(o,i,c,P,T)=>{const p=o.component;u(o,i,c,L.ENTER,a),g(p.vnode,o,i,c,p,a,P,o.slotScopeIds,T),l.queuePostFlushCb(()=>{p.isDeactivated=!1,p.a&&k(p.a);const I=o.props&&o.props.onVnodeMounted;I&&b(I,p.parent,o)},a)},r.deactivate=o=>{const i=o.component;u(o,j,null,L.LEAVE,a),l.queuePostFlushCb(()=>{i.da&&k(i.da);const c=o.props&&o.props.onVnodeUnmounted;c&&b(c,i.parent,o),i.isDeactivated=!0},a)};function q(o){U(o),S(o,t,a,!0)}let V=null,C=!1;const y=()=>{V&&(C?d[d.length-1].vnode=h(t.subTree):(console.log("cacheSubtree and push"),d.push({vnode:h(t.subTree)}),console.log(d)))};return l.onMounted(y),l.onUpdated(y),l.onBeforeUnmount(()=>{for(const o of d)q(o.vnode)}),()=>{if(C=!1,!n.default)return null;const o=n.default(),i=o[0];if(o.length>1)return o;if(!l.isVNode(i)||!(i.shapeFlag&N.STATEFUL_COMPONENT)&&!(i.shapeFlag&N.SUSPENSE))return i;let c=h(i);console.log("vnode.key",c.key);const P=D();if(c.el&&(c=l.cloneVNode(c),i.shapeFlag&N.SUSPENSE&&(i.ssContent=c)),V=P,m.action===E.backName){console.log("back");let T=d.pop();const p=d[d.length-1].vnode;c.el=p.el,c.component=p.component,c.transition&&l.setTransitionHooks(c,c.transition),c.shapeFlag|=N.COMPONENT_KEPT_ALIVE,U(T.vnode),T=null,C=!0}return c.shapeFlag|=N.COMPONENT_SHOULD_KEEP_ALIVE,M(i.type)?i:c}}}),H=e=>{const n=e.push.bind(e),t=e.go.bind(e),r=e.replace.bind(e),a=e.back.bind(e),g=e.forward.bind(e);e.push=u=>(m.action=E.pushName,n(u)),e.go=u=>{m.action=E.goName,t(u)},e.replace=u=>(m.action=E.replaceName,r(u)),e.back=()=>{m.action=E.backName,a()},e.forward=()=>{m.action=E.forwardName,g()}},w={install(e,{router:n,backCallback:t,forwardCallback:r}={router:null,backCallback:null,forwardCallback:null}){if(!n)throw Error("router is required");let a=null;n.options.history.listen((g,u,S)=>{a=S}),n.beforeEach(()=>{a&&(a.direction==="back"&&t?t():a.direction==="forward"&&r&&r(),a=null)})}},K=()=>{m.action=E.backName};return{install(e,{router:n,name:t=E.componentName}){if(!n)throw Error(`
 vue-router is necessary. 

`);e.component(t,F()),e.use(w,{router:n,backCallback:K}),H(n)}}}(Vue);
