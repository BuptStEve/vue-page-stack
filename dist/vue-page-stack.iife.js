var VuePageStack=function(h,N){"use strict";const r={componentName:"VuePageStack",pushName:"push",goName:"go",replaceName:"replace",backName:"back",forwardName:"forward"},s={action:r.pushName,n:1};/**
* @vue/shared v3.4.19
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/process.env.NODE_ENV!=="production"&&Object.freeze({}),process.env.NODE_ENV!=="production"&&Object.freeze([]);const m=(e,c)=>{for(let l=0;l<e.length;l++)e[l](c)},f={ELEMENT:1,1:"ELEMENT",FUNCTIONAL_COMPONENT:2,2:"FUNCTIONAL_COMPONENT",STATEFUL_COMPONENT:4,4:"STATEFUL_COMPONENT",TEXT_CHILDREN:8,8:"TEXT_CHILDREN",ARRAY_CHILDREN:16,16:"ARRAY_CHILDREN",SLOTS_CHILDREN:32,32:"SLOTS_CHILDREN",TELEPORT:64,64:"TELEPORT",SUSPENSE:128,128:"SUSPENSE",COMPONENT_SHOULD_KEEP_ALIVE:256,256:"COMPONENT_SHOULD_KEEP_ALIVE",COMPONENT_KEPT_ALIVE:512,512:"COMPONENT_KEPT_ALIVE",COMPONENT:6,6:"COMPONENT"};function k(e,c,l,i){N.callWithAsyncErrorHandling(e,c,N.ErrorCodes.VNODE_HOOK,[l,i])}const b=e=>e.__isSuspense,L={ENTER:0,LEAVE:1,REORDER:2};function S(e){e.shapeFlag&=~f.COMPONENT_SHOULD_KEEP_ALIVE,e.shapeFlag&=~f.COMPONENT_KEPT_ALIVE}function P(e){return e.shapeFlag&f.SUSPENSE?e.ssContent:e}const a=[],V=N.defineComponent({name:r.componentName,__isKeepAlive:!0,emits:["back","forward"],setup(e,{slots:c,emit:l}){const i=N.getCurrentInstance(),E=i.ctx,O=i.suspense,{renderer:{p,m:g,um:D,o:{createElement:H}}}=E,y=H("div");E.activate=(n,t,o,d,T)=>{const u=n.component;g(n,t,o,L.ENTER,O),p(u.vnode,n,t,o,u,O,d,n.slotScopeIds,T),N.queuePostFlushCb(()=>{u.isDeactivated=!1,u.a&&m(u.a);const M=n.props&&n.props.onVnodeMounted;M&&k(M,u.parent,n)},O)},E.deactivate=n=>{const t=n.component;g(n,y,null,L.LEAVE,O),N.queuePostFlushCb(()=>{t.da&&m(t.da);const o=n.props&&n.props.onVnodeUnmounted;o&&k(o,t.parent,n),t.isDeactivated=!0},O)};function K(n){S(n),D(n,i,O,!0)}let _=!1,C=!1;const A=()=>{_&&(C?a[a.length-1]=P(i.subTree):s.action!=r.replaceName?a.push(P(i.subTree)):a[a.length-1]=P(i.subTree))};return N.onMounted(A),N.onUpdated(A),N.onBeforeUnmount(()=>{for(const n of a)K(n)}),()=>{if(_=!1,C=!1,!c.default)return null;const n=c.default(),t=n[0];if(n.length>1)return n;if(!N.isVNode(t)||!(t.shapeFlag&f.STATEFUL_COMPONENT)&&!(t.shapeFlag&f.SUSPENSE))return t;let o=P(t);if(o.el&&(o=N.cloneVNode(o),t.shapeFlag&f.SUSPENSE&&(t.ssContent=o)),_=!0,s.action===r.backName){l("back");const d=-s.n,T=a[a.length-d-1];if(!T||T.key!=t.key)return S(a[a.length-d]),a[a.length-d]=null,a.splice(a.length-d),o.shapeFlag|=f.COMPONENT_SHOULD_KEEP_ALIVE,b(t.type)?t:o;o.el=T.el,o.component=T.component,o.transition&&N.setTransitionHooks(o,o.transition),o.shapeFlag|=f.COMPONENT_KEPT_ALIVE;for(let u=a.length-d;u<a.length;u++)S(a[u]),a[u]=null;a.splice(a.length-d),C=!0}else l("forward");return o.shapeFlag|=f.COMPONENT_SHOULD_KEEP_ALIVE,b(t.type)?t:o}}}),F=e=>{const c=e.push.bind(e),l=e.go.bind(e),i=e.replace.bind(e),E=e.back.bind(e),O=e.forward.bind(e);e.push=p=>(s.action=r.pushName,c(p)),e.go=p=>{p>0&&(s.action=r.forwardName),p<0&&(s.action=r.backName),s.n=p,l(p)},e.replace=p=>(s.action=r.replaceName,i(p)),e.back=()=>{s.action=r.backName,s.n=-1,E()},e.forward=()=>{s.action=r.forwardName,O()}},I={install(e,{router:c,backCallback:l,forwardCallback:i}={router:null,backCallback:null,forwardCallback:null}){if(!c)throw Error("router is required");let E=null;c.options.history.listen((O,p,g)=>{E=g}),c.beforeEach(()=>{E&&(E.direction==="back"&&l?l(E.delta):E.direction==="forward"&&i&&i(E.delta),E=null)})}},R=e=>{s.n=e,s.action=r.backName},U=e=>{s.n=e,s.action=r.forwardName},w={install(e,{router:c}){if(!c)throw Error(`
 vue-router is necessary. 

`);e.component(r.componentName,V),e.use(I,{router:c,backCallback:R,forwardCallback:U}),F(c)}};return h.VuePageStack=V,h.VuePageStackPlugin=w,Object.defineProperty(h,Symbol.toStringTag,{value:"Module"}),h}({},Vue);
